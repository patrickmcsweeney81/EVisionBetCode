{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Pipeline: Extract Odds",
      "type": "shell",
      "command": "${config:python.defaultInterpreterPath}",
      "args": [
        "src/pipeline_v2/extract_odds.py"
      ],
      "group": "build",
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "problemMatcher": []
    },
    {
      "label": "Pipeline: Calculate EV",
      "type": "shell",
      "command": "${config:python.defaultInterpreterPath}",
      "args": [
        "src/pipeline_v2/calculate_opportunities.py"
      ],
      "group": "build",
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "problemMatcher": []
    },
    {
      "label": "Pipeline: Run Full (Extract + Calculate)",
      "dependsOrder": "sequence",
      "dependsOn": [
        "Pipeline: Extract Odds",
        "Pipeline: Calculate EV"
      ],
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "problemMatcher": []
    },
    {
      "label": "Backend: Start API Server",
      "type": "shell",
      "command": "${config:python.defaultInterpreterPath}",
      "args": [
        "-m",
        "uvicorn",
        "backend_api:app",
        "--reload",
        "--host",
        "0.0.0.0",
        "--port",
        "8000"
      ],
      "isBackground": true,
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "problemMatcher": {
        "background": {
          "activeOnStart": true,
          "beginsPattern": "^.*Uvicorn running.*$",
          "endsPattern": "^.*Application startup complete.*$"
        }
      }
    },
    {
      "label": "Tests: Run All",
      "type": "shell",
      "command": "${config:python.defaultInterpreterPath}",
      "args": [
        "-m",
        "pytest",
        "tests",
        "-v",
        "--tb=short"
      ],
      "group": "test",
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "problemMatcher": []
    },
    {
      "label": "Tests: Run with Coverage",
      "type": "shell",
      "command": "${config:python.defaultInterpreterPath}",
      "args": [
        "-m",
        "pytest",
        "--cov=src",
        "--cov-report=term-missing",
        "--cov-report=html",
        "-v"
      ],
      "group": "test",
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "problemMatcher": []
    },
    {
      "label": "Format: Black + isort",
      "type": "shell",
      "command": "make",
      "args": [
        "format"
      ],
      "group": "none",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Lint: Flake8 + Pylint",
      "type": "shell",
      "command": "make",
      "args": [
        "lint"
      ],
      "group": "none",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Type Check: mypy",
      "type": "shell",
      "command": "make",
      "args": [
        "type-check"
      ],
      "group": "none",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Pre-commit: All Checks",
      "type": "shell",
      "command": "make",
      "args": [
        "pre-commit"
      ],
      "group": "none",
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "problemMatcher": []
    },
    {
      "label": "Install: Dev Dependencies",
      "type": "shell",
      "command": "make",
      "args": [
        "dev-install"
      ],
      "group": "none",
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "problemMatcher": []
    }
  ]
}
